$(document).ready(function(){function a(a,b){for(var c=a.split("?"),d=c[1].split("&"),e=0;e<d.length;e++){var f=d[e].split("=");if(f[0]==b)return f[1]}return""}function b(){if(count=0,$.each(["activity","messages","groups","friends"],function(a,b){target=$("li#notifications-"+b+" span.notifications-number"),target.is("*")&&(count+=parseInt(target.text()))}),count>0){var a=$("title").text().replace(/\[.*\]/,"");a="["+count+"]"+a,$("title").text(a)}}$("a.clear-notification").click(function(b){var c=$(this),d=a(c.attr("href"),"_wpnonce"),e=a(c.attr("href"),"notid"),f=a(c.attr("href"),"type");b.preventDefault(),c.removeAttr("href"),c.html(" &#x2713;"),$.post(ajaxurl,{action:"apoc_clear_notification",_wpnonce:d,notid:e},function(a){a&&(alert("we have response"),counter=$("li#notifications-"+f+" span.notifications-number"),count=parseInt(counter.text()),count>1?(counter.text(count-1),c.parent().remove()):(counter.remove(),c.parent().text("Notifications cleared!")),title=$("title").text(),count=title.split("]")[0].substr(1),count>1?title.replace(count,count-1):title.replace(/\[.*\]/,""),document.title=title)})}),b()});